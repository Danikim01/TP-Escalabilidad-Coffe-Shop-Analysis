{
  "common_environment": {
    "RABBITMQ_HOST": "rabbitmq",
    "RABBITMQ_PORT": 5672
  },
  "service_environment": {
    "gateway": {
      "OUTPUT_QUEUE": "transactions_raw",
      "RESULTS_QUEUE": "gateway_results",
      "CHUNK_SIZE": 100
    },
    "client": {}
  },
  "workers": {
    "year_filter": {
      "prefetch_count": 20,
      "groups": [
        {
          "count": 2,
          "environment": {
            "INPUT_QUEUE": "transactions_raw",
            "OUTPUT_QUEUE": "transactions_year_filtered"
          }
        }
      ]
    },
    "time_filter": {
      "prefetch_count": 20,
      "groups": [
        {
          "count": 2,
          "environment": {
            "INPUT_QUEUE": "transactions_year_filtered",
            "OUTPUT_QUEUE": "transactions_time_filtered",
            "OUTPUT_QUEUES": "transactions_time_filtered,transactions_time_filtered_tpv"
          }
        }
      ]
    },
    "amount_filter": {
      "prefetch_count": 20,
      "groups": [
        {
          "count": 2,
          "environment": {
            "INPUT_QUEUE": "transactions_time_filtered",
            "OUTPUT_QUEUE": "transactions_final_results"
          }
        }
      ]
    },
    "tpv": {
      "prefetch_count": 20,
      "groups": [
        {
          "count": 1,
          "environment": {
            "INPUT_QUEUE": "transactions_time_filtered_tpv",
            "OUTPUT_QUEUE": "transactions_final_results"
          }
        }
      ]
    },
    "results": {
      "groups": [
        {
          "count": 1,
          "environment": {
            "INPUT_QUEUE": "transactions_final_results",
            "OUTPUT_QUEUE": "gateway_results",
            "EXPECTED_EOF_COUNT": 2
          }
        }
      ]
    }
  }
}
